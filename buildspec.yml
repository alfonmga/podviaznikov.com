version: 0.2

environment_variables:
  plaintext:
    BUCKET_NAME: ""

phases:
  install:
    commands:
       - gem install asciidoctor
       - wget https://github.com/gohugoio/hugo/releases/download/v0.31.1/hugo_0.31.1_Linux-64bit.deb
       - dpkg -i hugo*.deb
  build:
    commands:
      - hugo
  post_build:
    commands:
      - aws s3 sync s3://${BUCKET_NAME} --cache-control "max-age=3600, public" --acl "public-read" --delete 
